<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>JWT-Vue-Django | LetsGo</title><meta name="description" content="">
    <link rel="preload" href="/coding-site/assets/style.771e27b8.css" as="style" /><link rel="stylesheet" href="/coding-site/assets/style.771e27b8.css" />
    <link rel="modulepreload" href="/coding-site/assets/app.2a81dd92.js"><link rel="modulepreload" href="/coding-site/assets/jwt.html.c930c2f3.js"><link rel="modulepreload" href="/coding-site/assets/jwt.html.7f7516ba.js"><link rel="prefetch" href="/coding-site/assets/index.html.d97de409.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.9f74e755.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.c446e925.js" as="script" /><link rel="prefetch" href="/coding-site/assets/default_theme.html.e1794834.js" as="script" /><link rel="prefetch" href="/coding-site/assets/plugins.html.006a6fb3.js" as="script" /><link rel="prefetch" href="/coding-site/assets/search.html.47edea50.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.28343fa5.js" as="script" /><link rel="prefetch" href="/coding-site/assets/scss.html.e092701b.js" as="script" /><link rel="prefetch" href="/coding-site/assets/transition.html.13bac882.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.bc195b7a.js" as="script" /><link rel="prefetch" href="/coding-site/assets/cors.html.2244e964.js" as="script" /><link rel="prefetch" href="/coding-site/assets/custom_registration.html.bd97aef7.js" as="script" /><link rel="prefetch" href="/coding-site/assets/dj_rest.html.5d1f9359.js" as="script" /><link rel="prefetch" href="/coding-site/assets/mysql.html.6cb9a673.js" as="script" /><link rel="prefetch" href="/coding-site/assets/pagination.html.a676b7cd.js" as="script" /><link rel="prefetch" href="/coding-site/assets/request_response.html.ef1f57b3.js" as="script" /><link rel="prefetch" href="/coding-site/assets/tmdb.html.683d2615.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.44f9f160.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.ba779851.js" as="script" /><link rel="prefetch" href="/coding-site/assets/async_await.html.28dcb5df.js" as="script" /><link rel="prefetch" href="/coding-site/assets/data_attribute.html.55c09143.js" as="script" /><link rel="prefetch" href="/coding-site/assets/infinite_scroll.html.e1071933.js" as="script" /><link rel="prefetch" href="/coding-site/assets/intersection_observer.html.3bf854cb.js" as="script" /><link rel="prefetch" href="/coding-site/assets/localstorage.html.70ef40e5.js" as="script" /><link rel="prefetch" href="/coding-site/assets/module.html.7ff17802.js" as="script" /><link rel="prefetch" href="/coding-site/assets/opt_chain.html.6fba739d.js" as="script" /><link rel="prefetch" href="/coding-site/assets/promise.html.9f342171.js" as="script" /><link rel="prefetch" href="/coding-site/assets/set_time_interval.html.03eca87c.js" as="script" /><link rel="prefetch" href="/coding-site/assets/sorting.html.9ca74e87.js" as="script" /><link rel="prefetch" href="/coding-site/assets/this.html.b1cae10c.js" as="script" /><link rel="prefetch" href="/coding-site/assets/00_intro.html.f1c5d98a.js" as="script" /><link rel="prefetch" href="/coding-site/assets/01_data_type.html.0afcd492.js" as="script" /><link rel="prefetch" href="/coding-site/assets/02_container.html.6bcfcd07.js" as="script" /><link rel="prefetch" href="/coding-site/assets/03_function.html.448163e4.js" as="script" /><link rel="prefetch" href="/coding-site/assets/04_oop.html.279afada.js" as="script" /><link rel="prefetch" href="/coding-site/assets/05_error_handling.html.4bbcb322.js" as="script" /><link rel="prefetch" href="/coding-site/assets/06_module.html.9fdbf427.js" as="script" /><link rel="prefetch" href="/coding-site/assets/10_fileIO.html.ab2e447a.js" as="script" /><link rel="prefetch" href="/coding-site/assets/11_decorator.html.1ec44695.js" as="script" /><link rel="prefetch" href="/coding-site/assets/21_numpy.html.07a63ba0.js" as="script" /><link rel="prefetch" href="/coding-site/assets/31_pandas.html.9745939b.js" as="script" /><link rel="prefetch" href="/coding-site/assets/41_matplot.html.5eb44ed7.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.01072639.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.a6f05ff5.js" as="script" /><link rel="prefetch" href="/coding-site/assets/array.html.81a7c69c.js" as="script" /><link rel="prefetch" href="/coding-site/assets/component.html.2e6544c2.js" as="script" /><link rel="prefetch" href="/coding-site/assets/env_var.html.644b5172.js" as="script" /><link rel="prefetch" href="/coding-site/assets/image_upload.html.d201ecde.js" as="script" /><link rel="prefetch" href="/coding-site/assets/navigation_guard.html.826a4fae.js" as="script" /><link rel="prefetch" href="/coding-site/assets/router.html.540d6371.js" as="script" /><link rel="prefetch" href="/coding-site/assets/1d_array.html.2771cb47.js" as="script" /><link rel="prefetch" href="/coding-site/assets/2d_array.html.9f6f97e8.js" as="script" /><link rel="prefetch" href="/coding-site/assets/array_partition.html.b9e976e0.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.1c203518.js" as="script" /><link rel="prefetch" href="/coding-site/assets/assert.html.11ebac20.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.b12ba4e2.js" as="script" /><link rel="prefetch" href="/coding-site/assets/404.html.52e576fc.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.c338b332.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.49c4b862.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.4d29b4da.js" as="script" /><link rel="prefetch" href="/coding-site/assets/default_theme.html.66adf0dd.js" as="script" /><link rel="prefetch" href="/coding-site/assets/plugins.html.c92ac2cf.js" as="script" /><link rel="prefetch" href="/coding-site/assets/search.html.3696c021.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.6b3d929f.js" as="script" /><link rel="prefetch" href="/coding-site/assets/scss.html.4cd1ec5f.js" as="script" /><link rel="prefetch" href="/coding-site/assets/transition.html.73d0876c.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.9fd34579.js" as="script" /><link rel="prefetch" href="/coding-site/assets/cors.html.383c5064.js" as="script" /><link rel="prefetch" href="/coding-site/assets/custom_registration.html.e7755428.js" as="script" /><link rel="prefetch" href="/coding-site/assets/dj_rest.html.8bb68c04.js" as="script" /><link rel="prefetch" href="/coding-site/assets/mysql.html.a2f43861.js" as="script" /><link rel="prefetch" href="/coding-site/assets/pagination.html.5ab16052.js" as="script" /><link rel="prefetch" href="/coding-site/assets/request_response.html.cab2a467.js" as="script" /><link rel="prefetch" href="/coding-site/assets/tmdb.html.bafb5776.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.0176e06a.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.f90e35eb.js" as="script" /><link rel="prefetch" href="/coding-site/assets/async_await.html.43168ffa.js" as="script" /><link rel="prefetch" href="/coding-site/assets/data_attribute.html.33ad008f.js" as="script" /><link rel="prefetch" href="/coding-site/assets/infinite_scroll.html.c39d3bef.js" as="script" /><link rel="prefetch" href="/coding-site/assets/intersection_observer.html.df50dae0.js" as="script" /><link rel="prefetch" href="/coding-site/assets/localstorage.html.f24706b8.js" as="script" /><link rel="prefetch" href="/coding-site/assets/module.html.db9b678e.js" as="script" /><link rel="prefetch" href="/coding-site/assets/opt_chain.html.847601ff.js" as="script" /><link rel="prefetch" href="/coding-site/assets/promise.html.6285266c.js" as="script" /><link rel="prefetch" href="/coding-site/assets/set_time_interval.html.d534ace4.js" as="script" /><link rel="prefetch" href="/coding-site/assets/sorting.html.36984558.js" as="script" /><link rel="prefetch" href="/coding-site/assets/this.html.7a3759ce.js" as="script" /><link rel="prefetch" href="/coding-site/assets/00_intro.html.035bbbe6.js" as="script" /><link rel="prefetch" href="/coding-site/assets/01_data_type.html.72ef46d5.js" as="script" /><link rel="prefetch" href="/coding-site/assets/02_container.html.84542080.js" as="script" /><link rel="prefetch" href="/coding-site/assets/03_function.html.02e7d615.js" as="script" /><link rel="prefetch" href="/coding-site/assets/04_oop.html.64f6793e.js" as="script" /><link rel="prefetch" href="/coding-site/assets/05_error_handling.html.f06d2831.js" as="script" /><link rel="prefetch" href="/coding-site/assets/06_module.html.362dbfc2.js" as="script" /><link rel="prefetch" href="/coding-site/assets/10_fileIO.html.85b2e033.js" as="script" /><link rel="prefetch" href="/coding-site/assets/11_decorator.html.0daf94fd.js" as="script" /><link rel="prefetch" href="/coding-site/assets/21_numpy.html.2d0f35f2.js" as="script" /><link rel="prefetch" href="/coding-site/assets/31_pandas.html.0aad84e0.js" as="script" /><link rel="prefetch" href="/coding-site/assets/41_matplot.html.f0fbcab5.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.21abb893.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.855a122a.js" as="script" /><link rel="prefetch" href="/coding-site/assets/array.html.1527b387.js" as="script" /><link rel="prefetch" href="/coding-site/assets/component.html.ce97a89e.js" as="script" /><link rel="prefetch" href="/coding-site/assets/env_var.html.ec157e95.js" as="script" /><link rel="prefetch" href="/coding-site/assets/image_upload.html.e12f7b8e.js" as="script" /><link rel="prefetch" href="/coding-site/assets/navigation_guard.html.3b057e72.js" as="script" /><link rel="prefetch" href="/coding-site/assets/router.html.825af3cf.js" as="script" /><link rel="prefetch" href="/coding-site/assets/1d_array.html.0810fbe0.js" as="script" /><link rel="prefetch" href="/coding-site/assets/2d_array.html.2bf4cc81.js" as="script" /><link rel="prefetch" href="/coding-site/assets/array_partition.html.1821327d.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.0f99c5f3.js" as="script" /><link rel="prefetch" href="/coding-site/assets/assert.html.8b7fd191.js" as="script" /><link rel="prefetch" href="/coding-site/assets/index.html.cf3054e4.js" as="script" /><link rel="prefetch" href="/coding-site/assets/404.html.2ab195f4.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/coding-site/" class=""><!----><span class="site-name">LetsGo</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/coding-site/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/css/" class="" aria-label="HTML/CSS"><!--[--><!--]--> HTML/CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/js/" class="" aria-label="Javscript"><!--[--><!--]--> Javscript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/django/" class="router-link-active" aria-label="Django"><!--[--><!--]--> Django <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/vue/" class="" aria-label="Vue.js"><!--[--><!--]--> Vue.js <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/coding-site/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/css/" class="" aria-label="HTML/CSS"><!--[--><!--]--> HTML/CSS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/js/" class="" aria-label="Javscript"><!--[--><!--]--> Javscript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/django/" class="router-link-active" aria-label="Django"><!--[--><!--]--> Django <!--[--><!--]--></a></div><div class="navbar-item"><a href="/coding-site/vue/" class="" aria-label="Vue.js"><!--[--><!--]--> Vue.js <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HTML/CSS <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/coding-site/css/transition.html" class="sidebar-item" aria-label="Transition"><!--[--><!--]--> Transition <!--[--><!--]--></a><!----></li><li><a href="/coding-site/css/scss.html" class="sidebar-item" aria-label="SASS, SCSS"><!--[--><!--]--> SASS, SCSS <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Python <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/coding-site/python/10_fileIO.html" class="sidebar-item" aria-label="File Input/Output"><!--[--><!--]--> File Input/Output <!--[--><!--]--></a><!----></li><li><a href="/coding-site/python/21_numpy.html" class="sidebar-item" aria-label="NumPy"><!--[--><!--]--> NumPy <!--[--><!--]--></a><!----></li><li><a href="/coding-site/python/31_pandas.html" class="sidebar-item" aria-label="Pandas"><!--[--><!--]--> Pandas <!--[--><!--]--></a><!----></li><li><a href="/coding-site/python/41_matplot.html" class="sidebar-item" aria-label="Matplot"><!--[--><!--]--> Matplot <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Django <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/coding-site/django/cors.html" class="sidebar-item" aria-label="CORS"><!--[--><!--]--> CORS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="JWT-Vue-Django"><!--[--><!--]--> JWT-Vue-Django <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/coding-site/django/jwt.html#vue-django-실습" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue &lt;-&gt; Django 실습"><!--[--><!--]--> Vue &lt;-&gt; Django 실습 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#django-cors-headers-설정" class="router-link-active router-link-exact-active sidebar-item" aria-label="django-cors-headers 설정"><!--[--><!--]--> django-cors-headers 설정 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#authentication-authorization" class="router-link-active router-link-exact-active sidebar-item" aria-label="Authentication &amp; Authorization"><!--[--><!--]--> Authentication &amp; Authorization <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#token-based" class="router-link-active router-link-exact-active sidebar-item" aria-label="Token-based"><!--[--><!--]--> Token-based <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#사용자-가입-작성" class="router-link-active router-link-exact-active sidebar-item" aria-label="사용자 가입 작성"><!--[--><!--]--> 사용자 가입 작성 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/coding-site/django/jwt.html#user-todo의-1-n-관계를-모델에-반영" class="router-link-active router-link-exact-active sidebar-item" aria-label="User -- Todo의  1 : N 관계를 모델에 반영"><!--[--><!--]--> User -- Todo의  1 : N 관계를 모델에 반영 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#user-serialization" class="router-link-active router-link-exact-active sidebar-item" aria-label="User serialization"><!--[--><!--]--> User serialization <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#client" class="router-link-active router-link-exact-active sidebar-item" aria-label="client"><!--[--><!--]--> client <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/coding-site/django/jwt.html#jwt-사용" class="router-link-active router-link-exact-active sidebar-item" aria-label="JWT 사용"><!--[--><!--]--> JWT 사용 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/coding-site/django/jwt.html#사전-작업" class="router-link-active router-link-exact-active sidebar-item" aria-label="사전 작업"><!--[--><!--]--> 사전 작업 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#login-vue" class="router-link-active router-link-exact-active sidebar-item" aria-label="Login.vue"><!--[--><!--]--> Login.vue <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#login-vue에서-생성된-token-처리" class="router-link-active router-link-exact-active sidebar-item" aria-label="Login.vue에서 생성된 token 처리"><!--[--><!--]--> Login.vue에서 생성된 token 처리 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#logout" class="router-link-active router-link-exact-active sidebar-item" aria-label="Logout"><!--[--><!--]--> Logout <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/coding-site/django/jwt.html#인증된-사용자만-todo를-사용하기" class="router-link-active router-link-exact-active sidebar-item" aria-label="인증된 사용자만 Todo를 사용하기"><!--[--><!--]--> 인증된 사용자만 Todo를 사용하기 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/coding-site/django/dj_rest.html" class="sidebar-item" aria-label="dj-rest-auth"><!--[--><!--]--> dj-rest-auth <!--[--><!--]--></a><!----></li><li><a href="/coding-site/django/tmdb.html" class="sidebar-item" aria-label="TMDB Data -&gt; DB"><!--[--><!--]--> TMDB Data -&gt; DB <!--[--><!--]--></a><!----></li><li><a href="/coding-site/django/custom_registration.html" class="sidebar-item" aria-label="django-allauth + Custom User/Registration"><!--[--><!--]--> django-allauth + Custom User/Registration <!--[--><!--]--></a><!----></li><li><a href="/coding-site/django/pagination.html" class="sidebar-item" aria-label="Pagination"><!--[--><!--]--> Pagination <!--[--><!--]--></a><!----></li><li><a href="/coding-site/django/request_response.html" class="sidebar-item" aria-label="Request &amp; Response"><!--[--><!--]--> Request &amp; Response <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Javascript <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/coding-site/js/async_await.html" class="sidebar-item" aria-label="async/await"><!--[--><!--]--> async/await <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/data_attribute.html" class="sidebar-item" aria-label="Data Attribute"><!--[--><!--]--> Data Attribute <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/intersection_observer.html" class="sidebar-item" aria-label="Intersection Observer"><!--[--><!--]--> Intersection Observer <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/infinite_scroll.html" class="sidebar-item" aria-label="infinite scroll"><!--[--><!--]--> infinite scroll <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/localstorage.html" class="sidebar-item" aria-label="localStorage"><!--[--><!--]--> localStorage <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/module.html" class="sidebar-item" aria-label="Javscript Module"><!--[--><!--]--> Javscript Module <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/promise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/set_time_interval.html" class="sidebar-item" aria-label="setTimeout, setInterval"><!--[--><!--]--> setTimeout, setInterval <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/sorting.html" class="sidebar-item" aria-label="sorting in JS"><!--[--><!--]--> sorting in JS <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/this.html" class="sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----></li><li><a href="/coding-site/js/opt_chain.html" class="sidebar-item" aria-label="Question Mark"><!--[--><!--]--> Question Mark <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue.js <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/coding-site/vue/component.html" class="sidebar-item" aria-label="Component"><!--[--><!--]--> Component <!--[--><!--]--></a><!----></li><li><a href="/coding-site/vue/array.html" class="sidebar-item" aria-label="배열 변경 감지"><!--[--><!--]--> 배열 변경 감지 <!--[--><!--]--></a><!----></li><li><a href="/coding-site/vue/router.html" class="sidebar-item" aria-label="Router"><!--[--><!--]--> Router <!--[--><!--]--></a><!----></li><li><a href="/coding-site/vue/navigation_guard.html" class="sidebar-item" aria-label="Navigation Guard"><!--[--><!--]--> Navigation Guard <!--[--><!--]--></a><!----></li><li><a href="/coding-site/vue/env_var.html" class="sidebar-item" aria-label="환경 변수"><!--[--><!--]--> 환경 변수 <!--[--><!--]--></a><!----></li><li><a href="/coding-site/vue/image_upload.html" class="sidebar-item" aria-label="이미지 업로드(Django(rest) + Vue(axios))"><!--[--><!--]--> 이미지 업로드(Django(rest) + Vue(axios)) <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="jwt-vue-django" tabindex="-1"><a class="header-anchor" href="#jwt-vue-django" aria-hidden="true">#</a> JWT-Vue-Django</h1><h2 id="vue-django-실습" tabindex="-1"><a class="header-anchor" href="#vue-django-실습" aria-hidden="true">#</a> Vue &lt;-&gt; Django 실습</h2><p>[TOC]</p><hr><h2 id="django-cors-headers-설정" tabindex="-1"><a class="header-anchor" href="#django-cors-headers-설정" aria-hidden="true">#</a> django-cors-headers 설정</h2><ul><li>install package</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> django-cors-headers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>install app - setings.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">&#39;corsheaders&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">]</span>
MIDDLEWARE <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token string">&#39;corsheaders.middleware.CorsMiddleware&#39;</span><span class="token punctuation">,</span>  <span class="token comment"># 아래보다 위에 있어야 한다.</span>
    <span class="token string">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Example - settings.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 모든 origin 허용</span>
<span class="token comment"># CORS_ALLOWED_ORIGINS = True </span>

<span class="token comment"># 특정 origin</span>
CORS_ALLOWED_ORIGINS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;https://sub.example.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://127.0.0.1:9000&quot;</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="authentication-authorization" tabindex="-1"><a class="header-anchor" href="#authentication-authorization" aria-hidden="true">#</a> Authentication &amp; Authorization</h2><ul><li><p>HTTP 응답</p><ul><li>인증 실패 : 401 Unahorized</li><li>권한 위반 : 403 Forbidden</li></ul></li><li><p>인증 이후에 권한이 부여된다.</p></li><li><p>인증 방식은 session, token, 제 3자를 사용하는 방법등</p></li></ul><h2 id="token-based" tabindex="-1"><a class="header-anchor" href="#token-based" aria-hidden="true">#</a> Token-based</h2><ul><li><p>JWT (JSON Web Token)</p></li><li><p>JSON 포맷을 활용하여 요소간 안전하게 정보를 교환하는 표준 포맷</p></li><li><p>암호화 알고리즘에 의한 디지털 서명이 있어서 자체로 검증가능하고 신뢰할 수 있다.</p></li><li><p>Session에 비해 상대적으로 HTML, HTTP 환경에서 사용하기 용이하다.</p><ul><li>Session은 Server에서 저장/관리</li><li>JWT는 client-side에 저장</li></ul></li><li><p>JWT = Header + Payload + Signature</p></li></ul><hr><h2 id="사용자-가입-작성" tabindex="-1"><a class="header-anchor" href="#사용자-가입-작성" aria-hidden="true">#</a> 사용자 가입 작성</h2><h3 id="user-todo의-1-n-관계를-모델에-반영" tabindex="-1"><a class="header-anchor" href="#user-todo의-1-n-관계를-모델에-반영" aria-hidden="true">#</a> User -- Todo의 1 : N 관계를 모델에 반영</h3><ul><li>todos/models.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf <span class="token keyword">import</span> settings

<span class="token keyword">class</span> <span class="token class-name">Todo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>
      settings<span class="token punctuation">.</span>AUTH_USER_MODEL<span class="token punctuation">,</span> 
      on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> 
      related_name<span class="token operator">=</span><span class="token string">&#39;todos&#39;</span>
      <span class="token punctuation">)</span>
    <span class="token comment"># ... </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>db migrate 하기</li></ul><h3 id="user-serialization" tabindex="-1"><a class="header-anchor" href="#user-serialization" aria-hidden="true">#</a> User serialization</h3><ul><li>serializers.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers

<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth <span class="token keyword">import</span> get_user_model

User <span class="token operator">=</span> get_user_model<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">UserSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># write_only =&gt; 직렬화는 하지만 응답에는 포함시키지 않음.</span>
    password <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>write_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
      model <span class="token operator">=</span> User
      fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>views.py / signup()</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> <span class="token punctuation">.</span>serializers <span class="token keyword">import</span> UserSerializer


<span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">signup</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#1-1. Client에서 온 데이터를 받아서</span>
    password <span class="token operator">=</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span>
    password_confirmation <span class="token operator">=</span> request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;passwordConfirmation&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">#1-2. 패스워드 일치 여부 체크</span>
    <span class="token keyword">if</span> password <span class="token operator">!=</span> password_confirmation<span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>
            <span class="token punctuation">{</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;비밀번호가 일치하지 않습니다.&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
            status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_400_BAD_REQUEST
        <span class="token punctuation">)</span>

    <span class="token comment">#2. UserSerializer를 통해 데이터 직렬화</span>
    serializer <span class="token operator">=</span> UserSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

    <span class="token comment">#3. validation 작업 진행 -&gt; password도 같이 직렬화 진행</span>
    <span class="token keyword">if</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">#4. 비밀번호 해싱 후 </span>
        user<span class="token punctuation">.</span>set_password<span class="token punctuation">(</span>request<span class="token punctuation">.</span>data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        user<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># password는 직렬화 과정에는 포함 되지만 → 표현(response)할 때는 나타나지 않는다.</span>
    <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="client" tabindex="-1"><a class="header-anchor" href="#client" aria-hidden="true">#</a> client</h3><ul><li>Signup.vue 수정</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>

<span class="token operator">//</span> const SERVER_URL <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>VUE_APP_SERVER_URL

export default <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&#39;Signup&#39;</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      credentials<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        username<span class="token punctuation">:</span> null<span class="token punctuation">,</span>
        password<span class="token punctuation">:</span> null<span class="token punctuation">,</span>
        passwordConfirmation<span class="token punctuation">:</span> null<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    signup<span class="token punctuation">:</span> function <span class="token punctuation">(</span>credentials<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      axios<span class="token punctuation">(</span><span class="token punctuation">{</span>
        method<span class="token punctuation">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
        url<span class="token punctuation">:</span> <span class="token string">&#39;http://127.0.0.1:8000/accounts/signup/&#39;</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> this<span class="token punctuation">.</span>credentials<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>then<span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>catch<span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jwt-사용" tabindex="-1"><a class="header-anchor" href="#jwt-사용" aria-hidden="true">#</a> JWT 사용</h2><ul><li><a href="https://jpadilla.github.io/django-rest-framework-jwt/" target="_blank" rel="noopener noreferrer">Django REST framework JWT<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="사전-작업" tabindex="-1"><a class="header-anchor" href="#사전-작업" aria-hidden="true">#</a> 사전 작업</h3><ul><li>install</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ pip <span class="token function">install</span> djangorestframework-jwt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>settings.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>
        <span class="token string">&#39;rest_framework.permissions.IsAuthenticated&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>
        <span class="token string">&#39;rest_framework_jwt.authentication.JSONWebTokenAuthentication&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>urls.py</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework_jwt<span class="token punctuation">.</span>views <span class="token keyword">import</span> obtain_jwt_token<span class="token punctuation">,</span> refresh_jwt_token<span class="token punctuation">,</span> verify_jwt_token
<span class="token comment">#...</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token comment"># ...</span>

    path<span class="token punctuation">(</span><span class="token string">&#39;api-token-auth/&#39;</span><span class="token punctuation">,</span> obtain_jwt_token<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment"># additional</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;api-token-refresh/&#39;</span><span class="token punctuation">,</span> refresh_jwt_token<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;api-token-verify/&#39;</span><span class="token punctuation">,</span> verify_jwt_token<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>추가 설정 - 기본 default / 공식 문서 작성</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> datetime 
<span class="token comment"># . . .</span>
<span class="token comment"># . . .</span>
JWT_AUTH <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment"># token 유효기간   </span>
    <span class="token string">&#39;JWT_EXPIRATION_DELTA&#39;</span><span class="token punctuation">:</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>postman</strong> 으로 확인해본다.</p><ul><li>http://127.0.0.1:8000/accounts/api-token-auth/</li><li>body의 form-data에서 username, password 입력</li><li>토큰이 발급된것을 확인</li></ul></li><li><p>jwt.io 의 <strong>Debug</strong> 에서</p><ul><li>token 과 django의 secret key를 입력해서 PAYLOADA와 <strong>Signature Verified</strong> 확인</li></ul></li><li><p><strong>주의 &gt; token의 유효기간을 의도적으로 만료시킬 순 없다.</strong></p></li></ul><hr><h3 id="login-vue" tabindex="-1"><a class="header-anchor" href="#login-vue" aria-hidden="true">#</a> Login.vue</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>사용자 이름: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>credentials.username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>비밀번호: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>credentials.password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>로그인<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token comment">// const SERVER_URL = p<wbr>rocess.env.VUE_APP_SERVER_URL</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">login</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;http://127.0.0.1:8000/accounts/api-token-auth/&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>credentials<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>토큰 생성된 것을 확인</li></ul><hr><h3 id="login-vue에서-생성된-token-처리" tabindex="-1"><a class="header-anchor" href="#login-vue에서-생성된-token-처리" aria-hidden="true">#</a> Login.vue에서 생성된 token 처리</h3><ul><li><code>local storage</code> 에 <em>token</em> 을 저장하고, TodoList 로 이동</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">login</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;http://127.0.0.1:8000/accounts/api-token-auth/&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>credentials<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;TodoList&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="logout" tabindex="-1"><a class="header-anchor" href="#logout" aria-hidden="true">#</a> Logout</h3><ul><li>App.vue</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token comment">// 로그인 여부</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 최초, 토큰이 있는지 없는지를 보고 확인한다.</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>login <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>login <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Login.vue --&gt; App.vue 로 알려주기 <ul><li>event 전달</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>          
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
        #<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
        # Emit Event
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;login&#39;</span><span class="token punctuation">)</span>
        #<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;TodoList&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>App.vue 에서 이벤트 처리 <ul><li>@click.native &lt;-- 원래의 고유한 이벤트를 처리하기 위해서 <strong>native</strong> 사용</li></ul></li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Logout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |

...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">@login</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isLogin=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

...

logout: function() {
      this.isLogin = false
      localStorage.removeItem(&#39;jwt&#39;)
      this.$route.pushh({name: &#39;Login&#39;})
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Vuex 처리하는 방법도 작성해본다.</li></ul><hr><h3 id="인증된-사용자만-todo를-사용하기" tabindex="-1"><a class="header-anchor" href="#인증된-사용자만-todo를-사용하기" aria-hidden="true">#</a> 인증된 사용자만 Todo를 사용하기</h3><ul><li>Server에서 todos/views.py 에서 필요한 모듈 import</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> authentication_classes<span class="token punctuation">,</span> permission_classes
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>permissions <span class="token keyword">import</span> IsAuthenticated
<span class="token keyword">from</span> rest_framework_jwt<span class="token punctuation">.</span>authentication <span class="token keyword">import</span> JSONWebTokenAuthentication
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>함수에 <code>decorator</code> 적용하기</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># JWT 을 활용한 인증시 JWT 자체를 검증한 인증 여부와 상관 없이 JWT가 유효한지 파악</span>
<span class="token decorator annotation punctuation">@authentication_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>JSONWebTokenAuthentication<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 인증이 되지 않은 상태로 요청이 오면 &quot;자격 인증 데이터&quot;가 제공 않았습니다. 같은 메시지를 응답함.</span>
<span class="token decorator annotation punctuation">@permission_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>IsAuthenticated<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">todo_list_create</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">:</span>
        <span class="token comment"># todos = Todo.objects.all()</span>
        <span class="token comment"># 로그인한 user의 todo</span>
        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>todos<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

    <span class="token keyword">elif</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">:</span>
        serializer <span class="token operator">=</span> TodoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token keyword">if</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span>user<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span>            <span class="token comment"># user 정보가 필요함.</span>
            <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@api_view</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;PUT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@authentication_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>JSONWebTokenAuthentication<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@permission_classes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>IsAuthenticated<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">todo_update_delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> todo_pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
    todo <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Todo<span class="token punctuation">,</span> pk<span class="token operator">=</span>todo_pk<span class="token punctuation">)</span>

    <span class="token comment"># 1. 해당 todo의 유저가 아닌 경우 todo를 수정하거나 삭제하지 못하게 설정</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>pk<span class="token operator">=</span>todo_pk<span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;detail&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;권한이 없습니다.&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_403_FORBIDDEN<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>postman Headers에서 key=Authorization, value =JWT &#39;{token}&#39; 으로 확인</p></li><li><p>TodoList.vue와 CreteTodo.vue 수정하기</p><ul><li>HTTP header에 JWT tokent을 넣어서 요청을 보낸다.</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>sript<span class="token operator">&gt;</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setToken</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment">// 헤더에 포함할 내용(token)을 생성</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">Authroization</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">JWT </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getTodos</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;http://127.0.0.1:8000/todos/&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">// 모든 axios 사용시 토큰을 headers에 추가</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;jwt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>sript<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: jongyun.jung@gmail.com">jongyun</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/coding-site/django/cors.html" class="" aria-label="CORS"><!--[--><!--]--> CORS <!--[--><!--]--></a></span><span class="next"><a href="/coding-site/django/dj_rest.html" class="" aria-label="dj-rest-auth"><!--[--><!--]--> dj-rest-auth <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/coding-site/assets/app.2a81dd92.js" defer></script>
  </body>
</html>
