import{_ as a,r as l,o as i,c as o,a as n,b as e,d as r,e as t}from"./app.2a81dd92.js";const c={},d=n("h1",{id:"cors",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cors","aria-hidden":"true"},"#"),e(" CORS")],-1),p={href:"https://developer.mozilla.org/ko/docs/Web/HTTP/CORS",target:"_blank",rel:"noopener noreferrer"},u=n("ul",null,[n("li",null,"기본적으로 동일 출처 정책 / SOP(Same-origin Policy)"),n("li",null,"XMLHttpRequest 는 SOP"),n("li",null,"출처 = (scheme/protocol, host, port)")],-1),h=n("li",null,[n("p",null,"추가 HTTP header를 사용해서, 다른 출처의 자원에 접근할 수 있도록 브라우저에 알려주는 방법")],-1),m=n("li",null,[n("p",null,[e("다른 출처의 자원을 가져오려면, 그 출처에서 "),n("strong",null,"올바른 CORS header를 포함한 응답을 반환"),e(" 해야 한다.")])],-1),v=t(`<img src="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/cors_principle.png" alt="cors" style="zoom:70%;"><blockquote><p>그림 출처 https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/cors_principle.png</p></blockquote><h2 id="why-cors" tabindex="-1"><a class="header-anchor" href="#why-cors" aria-hidden="true">#</a> why CORS?</h2><ul><li>브라우저와 웹앱 보호</li><li>Server 자원 관리</li></ul><h2 id="교차-출처-허용하기" tabindex="-1"><a class="header-anchor" href="#교차-출처-허용하기" aria-hidden="true">#</a> 교차 출처 허용하기</h2><ul><li>CORS는 어떤 호스트에서 자원에 접근할 수 있는지 서버에서 지정 <ul><li>응답 + CORS 헤더</li><li>Access-Control-Allow-Origin</li><li>Access-Control-Allow-Credentials</li><li>Access-Control-Allow-Headers</li><li>Access-Control-Allow-Methods</li></ul></li></ul><h2 id="django에-cors-설정" tabindex="-1"><a class="header-anchor" href="#django에-cors-설정" aria-hidden="true">#</a> Django에 CORS 설정</h2><h3 id="cors-패키지-설치" tabindex="-1"><a class="header-anchor" href="#cors-패키지-설치" aria-hidden="true">#</a> cors 패키지 설치</h3><ul><li><a href=":https://github.com/adamchainz/django-cors-headers">참고_사이트</a></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> django-cors-headers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="app-등록" tabindex="-1"><a class="header-anchor" href="#app-등록" aria-hidden="true">#</a> APP 등록</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># settings.py</span>
INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># ...,</span>
    <span class="token string">&quot;corsheaders&quot;</span><span class="token punctuation">,</span>
    <span class="token comment"># ...,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="미들웨어-클래스-추가" tabindex="-1"><a class="header-anchor" href="#미들웨어-클래스-추가" aria-hidden="true">#</a> 미들웨어 클래스 추가</h3><ul><li><strong><code>CommonMiddleware</code> 또는 <code>WhiteNoiseMiddleware</code> 같은 응답(response) 을 생성할 수 있는 미들웨어의 앞쪽에 위치</strong></li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># settings.py</span>
MIDDLEWARE <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># ...,</span>

    <span class="token string">&#39;corsheaders.middleware.CorsMiddleware&#39;</span><span class="token punctuation">,</span>
    <span class="token comment"># 아래 미들웨어 보다 앞쪽에</span>
    <span class="token string">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="token punctuation">,</span>

    <span class="token comment">#...,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="미들웨어-행동에-대한-설정" tabindex="-1"><a class="header-anchor" href="#미들웨어-행동에-대한-설정" aria-hidden="true">#</a> 미들웨어 행동에 대한 설정</h3><ul><li>다음 중 최소 하나를 설정</li></ul><h4 id="cors-allowed-origins-sequenc-str" tabindex="-1"><a class="header-anchor" href="#cors-allowed-origins-sequenc-str" aria-hidden="true">#</a> - <code>CORS_ALLOWED_ORIGINS: Sequenc[str]</code></h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># settings.py</span>
CORS_ALLOWED_ORIGINS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;https://example.com&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;https://sub.example.com&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;http://localhost:8080&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;http://127.0.0.1:9000&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cors-allowed-origin-regexes-sequenc-str-pattern-str" tabindex="-1"><a class="header-anchor" href="#cors-allowed-origin-regexes-sequenc-str-pattern-str" aria-hidden="true">#</a> - <code>CORS_ALLOWED_ORIGIN_REGEXES: Sequenc[str |Pattern[str]]</code></h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>CORS_ALLOWED_ORIGIN_REGEXES <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">r&#39;^https://\\w+\\.example\\.com$&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cors-allow-all-origins-bool" tabindex="-1"><a class="header-anchor" href="#cors-allow-all-origins-bool" aria-hidden="true">#</a> - <code>CORS_ALLOW_ALL_ORIGINS: bool</code></h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>CORS_ALLOW_ALL_ORIGINS <span class="token operator">=</span> <span class="token boolean">True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,23);function b(g,k){const s=l("ExternalLinkIcon");return i(),o("div",null,[d,n("ul",null,[n("li",null,[n("p",null,[n("a",p,[e("CORS(Cross-Orgin Resource Sharing)"),r(s)])]),u]),h,m]),v])}const S=a(c,[["render",b],["__file","cors.html.vue"]]);export{S as default};
